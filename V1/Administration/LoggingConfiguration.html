<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Message logging configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Message logging configuration ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="loggingConfiguration">
<h1 id="message-logging-configuration">Message logging configuration</h1>

<p>Edge Data Store writes daily log messages to flat text files in the following locations:</p>
<p>• Windows: <em>%ProgramData%/OSIsoft/EdgeDataStore/Logs</em></p>
<p>• Linux: <em>/usr/share/OSIsoft/EdgeDataStore/Logs</em></p>
<p>Each message in the log displays the message severity level, timestamp, and the message itself.</p>
<h2 id="default-logging-configuration-and-schema">Default logging configuration and schema</h2>
<p>By default, logging captures Information, Warning, Error, and Critical messages in the message logs.
The default logging configuration for a component on install is the following</p>
<pre><code class="lang-json">{
  &quot;logLevel&quot;: &quot;Information&quot;,
  &quot;logFileSizeLimitBytes&quot;: 34636833,
  &quot;logFileCountLimit&quot;: 31   
}
</code></pre><p>The schema file specifies how to formally describe the configuration parameters for message logging. 
It is located in:</p>
<p>• Windows: <em>%ProgramFiles%/OSIsoft/EdgeDataStore/Schema</em></p>
<p>• Linux: <em>/opt/EdgeDataStore/Schema</em></p>
<h3 id="log-levels">Log levels</h3>
<p>Changing the logLevel leads to captures of logs in severity including and above the specified log level. The log levels in their increasing order of severity are as follows: Trace, Debug, Information, Warning, Error, Critical.</p>
<p>Table: General guidelines for setting the log level.</p>
<table>
<thead>
<tr>
<th><strong>Level</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Trace</td>
<td>Logs that contain the most detailed messages. These messages may contain sensitive application data like actual received values. Generally, these messages shouldn’t be enabled in production environment.</td>
</tr>
<tr>
<td>Debug</td>
<td>Logs that can be used to troubleshoot data flow issues by logging metrics and detailed flow related information.</td>
</tr>
<tr>
<td>Information</td>
<td>Logs that track the general flow of the application. Any non-repetitive general information (like version information relating to the software at startup, what external services are being used, data source connection string, number of measurements, egress URL, change of state “Starting”, “Stopping” or configuration) can be useful for diagnosing potential application errors.</td>
</tr>
<tr>
<td>Warning</td>
<td>Logs that highlight an abnormal or unexpected event in the application flow, but do not otherwise cause the application execution to stop. This can be used to react on unconfigured data source state, message that communication with backup failover instance has been lost, use of insecure communication channel, or any other event that could require attention, but isn’t directly impacting the flow.</td>
</tr>
<tr>
<td>Error</td>
<td>Logs that highlight when the current flow of execution is stopped due to a failure. These should indicate a failure in the current activity, not an application-wide failure. This can be used to react on invalid configuration, unavailable external endpoint, internal flow error, etc.</td>
</tr>
<tr>
<td>Critical</td>
<td>Logs that describe an unrecoverable application or system crash, or a catastrophic failure that requires immediate attention. This can be used to react on application wide failures like beta timeout expired, unable to start self-hosted endpoint, unable to access vital resource (Data Protection key file for example).</td>
</tr>
</tbody>
</table>
<h3 id="log-file-count-limit">Log file count limit</h3>
<p>The logFileCountLimit controls the number of days the log files are persisted before they are deleted for creation of new log files. </p>
<h2 id="changing-logging-configuration">Changing logging configuration</h2>
<p>To change the logging configuration you can </p>
<ol>
<li>Save the new configuration information in a JSON file format.</li>
<li>Run the following script (or make an equivalent REST API call):</li>
</ol>
<p>For example Component_Logging.json</p>
<pre><code class="lang-json">{
  &quot;logLevel&quot;: &quot;Warning&quot;,
  &quot;logFileSizeLimitBytes&quot;: 16777216,
  &quot;logFileCountLimit&quot;: 30   
}
</code></pre><pre><code class="lang-bash">curl -i -d &quot;@Component_Logging.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/&lt;ComponentId&gt;/Logging
</code></pre><p><componentid> is the ComponentId of the adapter or Storage.<p>
<p>On successful execution, the log level change takes effect immediately during runtime. The other configurations (log file size and file count) get updated after Edge Data Store is restarted. </p>
<h3 id="note"><strong>Note:</strong></h3>
<p>If you do not specify all the parameters while changing the configuration, the specified parameters will be updated while the unspecified parameters will revert to the default schema values. </p>
</componentid></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-Data-Store-Docs/blob/master/V1/Administration/LoggingConfiguration.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2019 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
