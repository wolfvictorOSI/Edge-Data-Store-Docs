<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Configure EdgeCmd utility </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Configure EdgeCmd utility ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="commandLine">
<h1 id="configure-edgecmd-utility">Configure EdgeCmd utility</h1>

<p>The following sections provide instructions for the configuration of EdgeCmd utility for Windows or Linux.</p>
<p><strong>Note:</strong> The following EdgeCmd utility locations are based on the installation instructions in <a class="xref" href="Install%20EdgeCmd%20utility.html">EdgeCmd utility</a>.</p>
<p>Location on Windows:</p>
<pre><code class="lang-cmd">C:\Program Files\OSIsoft\EdgeCmd\edgecmd.exe
</code></pre><p><strong>Note:</strong> Specify the full path when you use EdgeCmd on Windows.</p>
<p>Location on Linux:</p>
<pre><code class="lang-bash"> /opt/OSIsoft/EdgeCmd/edgecmd
</code></pre><p><strong>Note:</strong> You can access EdgeCmd without using the full path on Linux. </p>
<h2 id="edge-data-store-configuration-with-edgecmd">Edge Data Store configuration with EdgeCmd</h2>
<p>Most configuration options that can be done using REST can also be done using the edgecmd utility and command line arguments.  Configuration and administrative REST interfaces are generally exposed through the command line. Read/write capabilities to the EDS storage component, OMF ingresss and SDS read/write capabilities are only available using the REST API.</p>
<h2 id="get-help">Get help</h2>
<p>The Edgecmd application provides a &#39;Help&#39; utility. For general instructions on how to use the Edgecmd application, type:</p>
<pre><code class="lang-bash">edgecmd Help
</code></pre><p>You can also use the utility to get help for any registered component in Edge Data Store. If you add a specific component ID to the end of the previous command, you receive help output for every configuration facet that the component supports, along with examples of commands that you can run to configure the component.</p>
<p>Example: View help for the &#39;System&#39; component:</p>
<pre><code class="lang-bash">edgecmd Help System

---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;Logging&#39;
---------------------------------------------------------------------------------------------------------
LogLevel                    [Required] Desired log level settings. Options: Verbose, Information, Warning, Error, Fatal.
LogFileSizeLimitBytes       [Required] Maximum size in bytes of log files that the service will create for this component. Must be no less than 1000.
LogFileCountLimit           [Required] Maximum number of log files that the service will create for this component. Must be a positive integer.

Example: ./edgecmd Configuration System Logging LogLevel=Warning
Example: ./edgecmd Configuration System Logging LogFileSizeLimitBytes=32768
Example: ./edgecmd Configuration System Logging LogFileCountLimit=5


---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;HealthEndpoints&#39;
---------------------------------------------------------------------------------------------------------
Id                           [Optional] Id of existing configuration to be edited of removed.
Endpoint                     [Required] URL of OMF destination
UserName                     [Required group 1]  User name used for authentication to PI Web API OMF endpoint.
Password                     [Required group 1]  Password used for authentication to PI Web API OMF endpoint.
ClientId                     [Required group 2]  Client ID used for authentication to OSIsoft Cloud Services.
ClientSecret                 [Required group 2]  Client Secret used for authentication to OSIsoft Cloud Services.
Buffering                    [Optional] Set the buffering type for messages to this endpoint. Options are &#39;memory&#39;, &#39;disk&#39; or &#39;none&#39;. Defaults to &#39;none&#39;.
MaxBufferSizeMB              [Optional] If an integer &gt;0, this is the limit on the maximum megabytes of data to buffer for messages to this endpoint. Useful for limiting memory or disk usage growth in the event of disconnection to the endpoint. If the buffer is full, old messages will be discarded for new messages. Defaults to 0.
ValidateEndpointCertificate  [Optional] If true, endpoint certificate will be validated (recommended). If false, any endpoint certificate will be accepted. OSIsoft strongly recommends using disabled endpoint certificate validation for testing purposes only.

Note: Only one Required group must be specified. Group 1 for PI Web API or Group 2 for OCS.
Example: ./edgecmd Configuration System HealthEndpoints Endpoint=endpointURL UserName=UserName Password=Password


---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;Port&#39;
---------------------------------------------------------------------------------------------------------
Port                        [Required] The tcp port to bind this application host to (Range [1024,65535])

Example: ./edgecmd Configuration System Port Port=5590


---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;Components&#39;
---------------------------------------------------------------------------------------------------------
ComponentId                        [Required] ID of the hosted component.
ComponentType                      [Required] Type of the hosted component.

Example: ./edgecmd Configuration System Components ComponentId=Modus1 ComponentType=Modbus
</code></pre><p>For help regarding a specific facet within a component, add the facet name after the component ID.</p>
<p>Example: Help for the &#39;Port&#39; facet within the &#39;System&#39; component:</p>
<pre><code class="lang-bash">edgecmd Help System Port

---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;Port&#39;
---------------------------------------------------------------------------------------------------------
Port                        [Required] The tcp port to bind this application host to (Range [1024,65535])

Example: ./edgecmd Configuration System Port Port=5590
</code></pre><h2 id="edge-data-store-components">Edge Data Store components</h2>
<p>The EdgeCmd utility enables you to add, configure, and delete Edge Data Store components.</p>
<h3 id="add-components">Add components</h3>
<p>With the following command, you can view which components are currently configured on Edge Data Store:</p>
<pre><code class="lang-bash">edgecmd Configuration System Components
</code></pre><p>To register a new component, use the following command:</p>
<pre><code class="lang-bash">edgecmd Configuration System Components componentId=&lt;componentId&gt; componentType=&lt;componentType&gt;
</code></pre><p>Valid component types are &quot;Modbus&quot; and &quot;OpcUa&quot;. If you are trying to register a Modbus EDS adapter, use &quot;Modbus&quot; and if you are trying to register an OPC UA adapter, use &quot;OpcUa&quot;. </p>
<p>Example: Modbus adapter component registration:</p>
<pre><code class="lang-bash">edgecmd Configuration System Components componentId=Modbus1 componentType=Modbus
</code></pre><h3 id="configure-components">Configure components</h3>
<p>The EDS Modbus adapter and OPC UA adapter each have three configurable facets: data source, data selection, and logging. You can configure these with edgecmd by specifying a component ID and facet name. </p>
<p>Example: Configuration of the data source facet of a Modbus adapter:</p>
<pre><code class="lang-bash">edgecmd Configuration Modbus1 DataSource IpAddress=117.23.45.110 port=502 ConnectTimeout=15000 StreamIdPrefix=&quot;DataSource1&quot;
</code></pre><p>For detailed information on how to configure each adapter, see the <a class="xref" href="../Configuration/Schemas/Modbus_schema.html">Modbus</a> and <a class="xref" href="../Configuration/Schemas/OpcUa_schema.html">OPC UA</a> schemas.</p>
<h3 id="delete-components">Delete components</h3>
<p>You can delete components from the Edge Data Store by using the following command:</p>
<pre><code class="lang-bash">edgecmd Configuration System Components id=&lt;componentId&gt; delete
</code></pre><p><strong>Note:</strong> You can&#39;t delete the &quot;Storage&quot; component because it is required for Edge Data Store to operate.</p>
<h2 id="retrieve-existing-system-configuration">Retrieve existing system configuration</h2>
<p>You can use the edgecmd utility to view the configuration for each part of Edge Data Store.</p>
<p>To view the entire configuration for every system component, run the following command:</p>
<pre><code class="lang-bash">edgecmd Configuration
</code></pre><p>To retrieve component specific configuration:</p>
<pre><code class="lang-bash">edgecmd Configuration componentId
</code></pre><p>To retrieve facet specific configuration of an Edge Data Store component:</p>
<pre><code class="lang-bash">edgecmd Configuration componentId facetName
</code></pre><p>For facets that contain multiple entries, you can retrieve the configuration for a specific entry by its Id:</p>
<pre><code class="lang-bash">edgecmd Configuration componentId facetName id=IndexToRetrieve
</code></pre><h3 id="examples">Examples</h3>
<ul>
<li>View the configuration of Edge Data Store using edgecmd:</li>
</ul>
<pre><code class="lang-bash">edgecmd Configuration System
{
  &quot;Logging&quot;: {
    &quot;logLevel&quot;: &quot;Information&quot;,
    &quot;logFileSizeLimitBytes&quot;: 34636833,
    &quot;logFileCountLimit&quot;: 31
  },
  &quot;HealthEndpoints&quot;: [],
  &quot;Port&quot;: {
    &quot;port&quot;: 5590
  },
  &quot;Components&quot;: [
    {
      &quot;componentId&quot;: &quot;OpcUa1&quot;,
      &quot;componentType&quot;: &quot;OpcUa&quot;
    },
    {
      &quot;componentId&quot;: &quot;Modbus1&quot;,
      &quot;componentType&quot;: &quot;Modbus&quot;
    },
    {
      &quot;componentId&quot;: &quot;Storage&quot;,
      &quot;componentType&quot;: &quot;EDS.Component&quot;
    }
  ]
}
</code></pre><ul>
<li><p>View the configuration of the &#39;System&#39; component</p>
<pre><code class="lang-bash">edgecmd Configuration System
{
&quot;Logging&quot;: {
  &quot;logLevel&quot;: &quot;Information&quot;,
  &quot;logFileSizeLimitBytes&quot;: 34636833,
  &quot;logFileCountLimit&quot;: 31
},
&quot;HealthEndpoints&quot;: [],
&quot;Port&quot;: {
  &quot;port&quot;: 5590
},
&quot;Components&quot;: [
  {
    &quot;componentId&quot;: &quot;Storage&quot;,
    &quot;componentType&quot;: &quot;EDS.Component&quot;
  }
]
}
</code></pre></li>
<li><p>View the configuration for the &#39;Logging&#39; facet within the &#39;Storage&#39; component</p>
<pre><code class="lang-bash">edgecmd Configuration Storage Logging
{
&quot;logLevel&quot;: &quot;Information&quot;,
&quot;logFileSizeLimitBytes&quot;: 34636833,
&quot;logFileCountLimit&quot;: 31
}
</code></pre></li>
<li><p>View the configuration of a specific entry in the &#39;PeriodicEgressEndpoint&#39; facet within the &#39;Storage&#39; component</p>
<pre><code class="lang-bash">edgecmd Configuration Storage PeriodicEgressEndpoints id=Endpoint_1
{
&quot;id&quot;: &quot;Endpoint_1&quot;,
&quot;executionPeriod&quot;: &quot;2.00:00:00&quot;,
&quot;name&quot;: null,
&quot;description&quot;: null,
&quot;enabled&quot;: true,
&quot;endpoint&quot;: &quot;http://localhost:5590&quot;,
&quot;clientId&quot;: null,
&quot;clientSecret&quot;: null,
&quot;userName&quot;: &quot;user_54&quot;,
&quot;password&quot;: &quot;***************&quot;,
&quot;validateEndpointCertificate&quot;: true,
&quot;tokenEndpoint&quot;: null,
&quot;debugExpiration&quot;: null,
&quot;namespaceId&quot;: &quot;default&quot;,
&quot;backfill&quot;: false,
&quot;egressFilter&quot;: null,
&quot;streamPrefix&quot;: null,
&quot;typePrefix&quot;: null
}
</code></pre></li>
</ul>
<h2 id="configure-edge-data-store">Configure Edge Data Store</h2>
<p>To create a configuration, you must enter the component and facet where the configuration payload should go, followed by key=value pairs to specify which values are to be changed. </p>
<p>Example: Change all values in the &#39;Logging&#39; facet:</p>
<pre><code class="lang-bash">edgecmd Configuration Storage Logging LogLevel=Warning LogFileSizeLimitBytes=32768 LogFileCountLimit=5
</code></pre><p>You can use this to configure any number of valid key=value pairs in a facet.</p>
<p>Example: Change a single value in the &#39;Logging&#39; facet:</p>
<pre><code class="lang-bash">edgecmd Configuration Storage Logging LogFileCountLimit=5
</code></pre><p>You can also use it to add an entry to a collection configuration, for example, the &#39;Health Endpoints&#39; facet in the &#39;System&#39; component:</p>
<pre><code class="lang-bash">edgecmd Configuration System HealthEndpoints Id=endpoint_1 Endpoint=endpointURL UserName=UserName Password=Password
</code></pre><p><strong>Note:</strong> If an entry with the specified id already exists, it will be updated based on the new key=value pairs.</p>
<h3 id="configure-with-json-files">Configure with JSON Files</h3>
<p>You can also configure Edge Data Store by a JSON file input into the edgecmd application. File imports will completely replace the existing configurations that you are attempting to change. Therefore, it cannot be used to change individual values in a facet without modifying others.</p>
<p>To import a bulk configuration:</p>
<pre><code class="lang-bash">edgecmd Configuration file=PathToJsonFile
</code></pre><p>To import a facet specific configuration file for a component:</p>
<pre><code>edgecmd Configuration componentId facetName file=PathToJsonFile
</code></pre><p>To import a file with configuration for individual facets, you can use a bulk file import operation. The file must contain just payload for the given component ID. </p>
<p>Example command:</p>
<pre><code class="lang-bash">edgecmd Configuration file=&quot;~/Bulk_Storage_Runtime.json&quot;
</code></pre><p>The file &#39;Bulk_Storage_Runtime.json&#39; contains:</p>
<pre><code class="lang-JSON">{
    &quot;Storage&quot;: {
        &quot;Runtime&quot;: {
            &quot;StreamStorageLimitMb&quot;: 66,
            &quot;StreamStorageTargetMb&quot;: 33,
            &quot;IngressDebugExpiration&quot;: &quot;2020-07-08T01:00:00&quot;,
            &quot;CheckpointRateInSec&quot;: 6,
            &quot;TransactionLogLimitMB&quot;: 350,
            &quot;EnableTransactionLog&quot;: true
        }
    }
}
</code></pre><p>The command will only affect the &#39;Runtime&#39; facet in the &#39;Storage&#39; component, it will not change any other components or facets. However, if you import a file containing the following, the &#39;StreamStorageLimitMb&#39; and &#39;StreamStorageTargetMb&#39; values would be modified, resetting the remaining values in the facet (IngressDebugExpiration, CheckpointRateInSec, TransactionLogLimitMB, and EnableTransactionLog) to their default values:</p>
<pre><code class="lang-JSON">{
    &quot;Storage&quot;: {
        &quot;Runtime&quot;: {
            &quot;StreamStorageLimitMb&quot;: 66,
            &quot;StreamStorageTargetMb&quot;: 33,
        }
    }
}
</code></pre><h2 id="delete-configuration-data">Delete configuration data</h2>
<p>You can use the edgecmd application to delete configuration data from Edge Data Store.
To delete a configuration entry from a collection configuration (for example, &#39;HealthEndpoints&#39; facet within the &#39;System&#39; component), you must specify the component ID, facet, and ID of the entry to remove followed by the &#39;delete&#39; keyword.
Example:</p>
<pre><code class="lang-bash">edgecmd Configuration System HealthEndpoints Id=endpoint_1 delete
</code></pre><p>To delete an entire configuration file, you must specify the component ID and facet followed by the &#39;delete&#39; keyword.
Example:</p>
<pre><code class="lang-bash">edgecmd Configuration System HealthEndpoints delete
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-Data-Store-Docs/blob/master/V1/CommandLine/CommandLine.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2019 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
