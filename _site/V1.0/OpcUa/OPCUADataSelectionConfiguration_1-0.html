<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Data selection configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Data selection configuration ">
    <meta name="generator" content="docfx 2.52.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="OPCUADataSelectionConfiguration1-0">
<h1 id="data-selection-configuration">Data selection configuration</h1>

<p>After configuring the data source, create a data selection configuration file to specify the data for the OPC UA EDS adapter instance to collect from the data source.</p>
<p>When you add a data source, the OPC UA EDS adapter browses the OPC UA server address space and exports the available OPC UA variables into a JSON file for data selection. If RootNodeIds are specified in the data source configuration, only those nodeIds are browsed. Data is collected automatically based upon user demands. OPC UA data from OPC UA variables is read through subscriptions (unsolicited reads).</p>
<p>You can either have the data selection configuration file generated for you or you can create it manually yourself.</p>
<h2 id="configure-opc-ua-data-selection-using-a-generated-file">Configure OPC UA data selection using a generated file</h2>
<p>A default OPC UA data selection file will be created if there is no OPC UA data selection configuration, but a valid OPC UA data source exists.</p>
<p><strong>Note:</strong> To avoid resource-intensive browse operations, OSIsoft recommends that you manually create a data selection file instead of generating the default data selection file.</p>
<p>Complete the following steps to generate the default data selection file and use it to configure data selection:</p>
<ol>
<li><p>Add an OPC UA EDS adapter instance with a unique ComponentId either manually or during the EDS installation. For details, see <a class="xref" href="../Configuration/EdgeSystemConfiguration_1-0.html">Edge Data Store configuration</a>.</p>
</li>
<li><p>Configure a valid OPC UA data source. For details, see <a class="xref" href="OPCUADataSourceConfiguration_1-0.html">Data source configuration</a>.</p>
<p>Once you complete these steps, a default OPC UA data selection configuration file is generated in the configuration directory with   the file name based on the ComponentId.</p>
<p>The following are example locations of the file created using the adapter instance created during installation, which is OpcUa1:</p>
<pre><code class="lang-bash">Windows: %programdata%\OSIsoft\EdgeDataStore\Configuration\OpcUa1_DataSelection.json

Linux: /usr/share/OSIsoft/EdgeDataStore/Configuration/OpcUa1_DataSelection.json
</code></pre></li>
<li><p>Copy the file to a different directory and open it using any text editor.</p>
<p>It will look similar to the following example:</p>
<pre><code class="lang-json">[
{
  &quot;Selected&quot;: false,
  &quot;Name&quot;: &quot;Cold Side Inlet Temperature&quot;,
  &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1001.ColdSideInletTemperature&quot;,
  &quot;StreamId&quot;: null
 },
 {
  &quot;Selected&quot;: false,
  &quot;Name&quot;: &quot;Cold Side Outlet Temperature&quot;,
  &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1001.ColdSideOutletTemperature&quot;,
  &quot;StreamId&quot;: null
 }
]
</code></pre></li>
<li><p>To ingress a stream to Edge Data Store, change the value of the <strong>Selected</strong> key from <code>false</code> to <code>true</code>. All streams in the auto generated data selection file are initially set to <code>false</code>.</p>
</li>
<li>Save the the file.</li>
<li><p>Run the following curl script from the directory where the file is located, updating the file name and destination in the script if needed:</p>
<pre><code class="lang-bash">curl -d &quot;@OpcUa1_DataSelection.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/OpcUa1/Dataselection
</code></pre></li>
</ol>
<h2 id="configure-opc-ua-data-selection-by-manually-creating-the-file">Configure OPC UA data selection by manually creating the file</h2>
<p><strong>Note:</strong> OPC UA data selection configurations cannot be modified manually. Use the REST endpoints to add or edit the configuration.</p>
<p>Complete the following steps to configure the OPC UA data selection:</p>
<ol>
<li>Using any text editor, create a file that contains an OPC UA data selection in JSON form.<ul>
<li>For content structure, see <a href="#opc-ua-data-selection-example">OPC UA data selection example</a>.</li>
</ul>
</li>
<li>Update the parameters as needed. For a table of all available parameters, see <a href="#parameters-for-opc-ua-data-selection">Parameters for OPC UA data selection</a>.</li>
<li>Save the file to the device with Edge Data Store installed with the name <em>DataSelection.config.json</em>.</li>
<li>Use any tool capable of making HTTP requests to execute a POST command with the contents of that file to the following endpoint: <code>http://localhost:&lt;port_number&gt;/api/v1/configuration/&lt;EDS adapterId&gt;/DataSelection/</code></li>
</ol>
<p>The following example shows the HTTPS request using curl, which must be run from the same directory where the file is located, and uses the adapter instance created during installation, which is OpcUa1:</p>
<pre><code class="lang-bash">curl -d &quot;@DataSelection.config.json&quot; -H &quot;Content-Type: application/json&quot; &quot;http://localhost:5590/api/v1/configuration/OpcUa1/DataSelection&quot;
</code></pre><h2 id="parameters-for-opc-ua-data-selection">Parameters for OPC UA data selection</h2>
<p>The following parameters can be used to configure OPC UA data selection:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Nullable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Selected</strong></td>
<td>Optional</td>
<td><code>Boolean</code></td>
<td>No</td>
<td>Use this field to select a measurement to be collected. To select an item, set to true. To remove an item and not collect its data, leave the field empty or set to false. If not configured, the default value is false.</td>
</tr>
<tr>
<td><strong>Name</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Yes</td>
<td>The optional friendly name of the data item collected from the data source. If not configured, the default value will be the stream id.</td>
</tr>
<tr>
<td><strong>NodeId</strong></td>
<td>Required</td>
<td><code>string</code></td>
<td>Yes</td>
<td>The NodeId of the variable.</td>
</tr>
<tr>
<td><strong>StreamID</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Yes</td>
<td>The custom stream ID used to create the streams. If not specified, the OPC UA EDS adapter will generate a default stream ID based on the measurement configuration. A properly configured custom stream ID follows these rules:<br><br>Is not case-sensitive.<br>Can contain spaces.<br>Cannot start with two underscores (&quot;__&quot;).<br>Can contain a maximum of 100 characters.<br>Cannot use the following characters: / : ? # [ ] @ ! $ &amp; &#39; ( ) \ * + , ; = % &lt; &gt; &#124;<br>Cannot start or end with a period.<br>Cannot contain consecutive periods.<br>Cannot consist of only periods.</td>
</tr>
</tbody>
</table>
<h2 id="opc-ua-data-selection-example">OPC UA data selection example</h2>
<p>The following is an example of valid OPC UA data selection configuration:</p>
<pre><code class="lang-json">[
 {
    &quot;Selected&quot;: true,
    &quot;Name&quot;: &quot;Random1&quot;,
    &quot;NodeId&quot;: &quot;ns=5;s=Random1&quot;,
    &quot;StreamId&quot;: &quot;CustomStreamName&quot;
  },
  {
    &quot;Selected&quot;: false,
    &quot;Name&quot;: &quot;Sawtooth1&quot;,
    &quot;NodeId&quot;: &quot;ns=5;s=Sawtooth1&quot;,
    &quot;StreamId&quot;: null
  },
  {
    &quot;Selected&quot;: true,
    &quot;Name&quot;: &quot;Sinusoid1&quot;,
    &quot;NodeId&quot;: &quot;ns=5;s=Sinusoid1&quot;,
    &quot;StreamId&quot;: null
  }
]
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
