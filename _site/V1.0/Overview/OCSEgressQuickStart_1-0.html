<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>OCS egress quick start </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="OCS egress quick start ">
    <meta name="generator" content="docfx 2.52.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="ocsEgressQuickStart1-0">
<h1 id="ocs-egress-quick-start">OCS egress quick start</h1>

<p>Data egress provides a mechanism to transfer data to OSIsoft Cloud Services using OMF messages. To get started sending data stored in Edge Data Store to OCS, create an OMF connection in OCS and configure an egress endpoint with the connection information for OCS.</p>
<h2 id="create-an-omf-connection-in-ocs">Create an OMF connection in OCS</h2>
<p>Complete the following steps to create an OMF connection in OCS:</p>
<ol>
<li><p>In OCS, create a <strong>Client</strong>.</p>
<p>The <em>Client Id</em> and <em>Client Secret</em> are used for the corresponding properties in the egress configuration.</p>
</li>
<li><p>In OCS, create an <strong>OMF</strong> type <strong>Connection</strong>.</p>
<p>The connection should link the client to an existing namespace where the data will be stored. The <strong>OMF Endpoint</strong> URL for the connection is used as the value for the <em>Endpoint</em> property in the egress configuration.</p>
<p>For complete steps, as well as best practices and recommendations, see the <a href="https://ocs-docs.osisoft.com/Documentation/OSIsoft_Cloud_Services.html">OSIsoft Cloud Services documentation</a>.</p>
</li>
</ol>
<h2 id="create-a-periodic-egress-configuration">Create a periodic egress configuration</h2>
<p>Complete the following steps to configure periodic egress to OCS:</p>
<ol>
<li><p>Create a JSON file containing one or more egress endpoints, by copying the following example into a text editor.</p>
<pre><code class="lang-json">[{
    &quot;Id&quot;: &quot;OCS&quot;,
    &quot;ExecutionPeriod&quot;: &quot;00:00:50&quot;,
    &quot;Name&quot;: null,
    &quot;NamespaceId&quot;: &quot;default&quot;,
    &quot;Description&quot;: null,
    &quot;Enabled&quot;: true,
    &quot;Backfill&quot;: false,
    &quot;EgressFilter&quot;: &quot;&quot;,
    &quot;StreamPrefix&quot;: &quot;ChangeMe&quot;,
    &quot;TypePrefix&quot;: &quot;ChangeMe&quot;,
    &quot;Endpoint&quot;: &quot;https://&lt;your OCS OMF endpoint&gt;&quot;,
    &quot;ClientId&quot;: &quot;&lt;your OCS ClientId&gt;&quot;,
    &quot;ClientSecret&quot;: &quot;&lt;your OCS ClientSecret&gt;&quot;,
    &quot;UserName&quot;: null,
    &quot;Password&quot;: null,
    &quot;DebugExpiration&quot;: null,
    &quot;ValidateEndpointCertificate&quot;: true,
    &quot;TokenEndpoint&quot;: null
}]
</code></pre></li>
<li><p>Modify the <strong>Endpoint</strong> parameter to be the URL of the OCS OMF endpoint.</p>
</li>
<li><p>Modify the <strong>ClientId</strong> and <strong>ClientSecret</strong> parameters with the authentication information to connect to the OCS OMF endpoint.</p>
<p> <strong>Note:</strong> If uniqueness is required on the destination system, use the <strong>StreamPrefix</strong> and <strong>TypePrefix</strong> parameters. If a StreamPrefix is specified, it is used to create a unique stream ID on OCS. This configuration is set up to send all stream data to OCS. To only send specific streams, edit the <strong>EgressFilter</strong> parameter. For examples of more advanced scenarios, see <a class="xref" href="../Egress/Egress_1-0.html">Data egress configuration</a>.</p>
</li>
<li><p>Save the JSON file with the name <em>PeriodicEgressEndpoints.json</em> to any directory on the device where EDS is installed.</p>
</li>
<li><p>To configure the Edge Storage component to send data to OCS, run the following curl script from the directory where the JSON file is located.</p>
<pre><code class="lang-bash">curl -d &quot;@PeriodicEgressEndpoints.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/storage/PeriodicEgressEndpoints/
</code></pre><p>When this command completes successfully, data egress to OCS begins.</p>
</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
